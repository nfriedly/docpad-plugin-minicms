// Generated by IcedCoffeeScript 1.8.0-a
(function() {
  module.exports = function() {
    if (this.shouldLoadScript) {
      coffeescript(function() {
        return window.minicms_component_color = function(prefix, form, name) {
          var field, update;
          field = $('#field-' + form + '-' + name);
          console.log(name + " = " + $('#' + form + '-form').data('fields')[name]);
          field.data('value', $('#' + form + '-form').data('fields')[name]);
          minicms_form_load(prefix, form, name);
          update = function() {
            var newVal;
            newVal = $('.input-append.color input.form-value', field).val();
            if (newVal !== field.data('value')) {
              console.log(name + " = " + newVal);
              field.data('value', newVal);
              return minicms_form_update(prefix, form);
            }
          };
          $('.input-append.color', field).colorpicker();
          return setInterval(update, 250);
        };
      });
    }
    div('#field-' + this.form + '-' + this.field + '.control-group.form-component-color', function() {
      return div('.form-field-content', function() {
        label('.control-label', {
          "for": "form-input-" + this.form + "-" + this.field
        }, function() {
          return h(this.label);
        });
        return div('.controls', function() {
          var _ref;
          return div('.input-append.color', {
            'data-color': h(((_ref = this.value) != null ? _ref.length : void 0) ? this.value : '#ffffff'),
            'data-color-format': 'hex'
          }, function() {
            var _ref1;
            input('#form-input-' + this.form + '-' + this.field + '.form-value.input-xlarge.no-halo.span1', {
              type: 'text',
              value: h(((_ref1 = this.value) != null ? _ref1.length : void 0) ? this.value : '#ffffff'),
              name: this.field
            }, function() {});
            return span('.add-on', function() {
              var _ref2;
              return i({
                style: 'background-color:' + h(((_ref2 = this.value) != null ? _ref2.length : void 0) ? this.value : '#ffffff')
              }, function() {});
            });
          });
        });
      });
    });
    return text('<script type="text/javascript">minicms_component_color("' + this.config.prefix.url + '", "' + this.form + '", "' + this.field + '");</script>');
  };

}).call(this);
